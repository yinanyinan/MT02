(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{130:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(10),c=function(){function t(){}return t.prototype.inputBlankCheck=function(t){return o(this,void 0,void 0,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:if(e=[],""!==document.getElementById(t+"FirstName").value&&""!==document.getElementById(t+"LastName").value||e.push("氏名"),""===document.getElementById(t+"ManagementNum").value&&e.push("管理番号"),-1===Number(document.getElementById(t+"Category").value)&&e.push("カテゴリ"),""===document.getElementById(t+"BorrowedSource").value&&e.push("貸与元名称"),""===document.getElementById(t+"StartDate").value&&e.push("貸与開始日"),""===document.getElementById(t+"ExpectedReturnDate").value&&e.push("返却予定日"),-1===Number(document.getElementById(t+"StorageLocation").value)&&e.push("保管場所"),!(n=0!==e.length))return[3,2];for(r="",o=0;o<e.length-1;o++)r+=e[o]+"、";return r+=e[e.length-1]+"（※必須項目）が入力されていません",[4,s.notification.alert({title:"入力エラー",message:r})];case 1:i.sent(),i.label=2;case 2:return[2,!n]}}))}))},t.prototype.isPhoneticCheck=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return(e=!document.getElementById(t+"FirstName").value.match(/^[ァ-ンー]+$/)||!document.getElementById(t+"LastName").value.match(/^[ァ-ンー]+$/))?[4,s.notification.alert({title:"入力エラー",message:"氏名はカタカナで入力してください。"})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,!e]}}))}))},t.prototype.executeConfirm=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return console.log(t),[4,s.notification.confirm({title:"確認",message:t+"を実行しますか？"}).then((function(t){return t}))];case 1:return[2,1===e.sent()]}}))}))},t.prototype.isExistUserCheck=function(t){return o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){return e=JSON.parse(sessionStorage.getItem("kanaArray")),n=!1,e.forEach((function(e,r){e.indexOf(t)>=0&&(n=!0)})),n||s.notification.alert({title:"警告",message:"その人物は存在しません。"}),[2,n]}))}))},t=r([a.Injectable()],t)}();e.ValidationCheckService=c},131:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(59),l=n(10),u=n(130),h=n(89),f=n(167),d=function(){function t(t,e,n,r,o){this.navigator=t,this.params=e,this.validCheck=n,this.registerService=r,this.updateService=o,this.selectedModifier=-1,this.modifiers=[{value:-1,label:"未選択"}],this.selectedStorageLocation=-1,this.StorageLocation=[{value:-1,label:"未選択"}]}var e,n,d,p,g;return t.prototype.ngOnInit=function(){this.modifiers=JSON.parse(localStorage.getItem("categoryList")),this.StorageLocation=this.registerService.getStorageLocationList(),console.log("データゲット"),this.param=this.params,this.firstName=this.param.data.name.split(" ")[0],this.lastName=this.param.data.name.split(" ")[1],this.objectId=this.param.data.objectId,this.managementNum=this.param.data.managementNum,this.selectedModifier=this.param.data.categoryID,this.borrowedSource=this.param.data.borrowedSource,this.startDate=this.param.data.startDate,this.expectedReturnDate=this.param.data.expectedReturnDate,this.param.data.returnDate&&(this.returnDate=this.param.data.returnDate),this.selectedStorageLocation=this.param.data.storageLocationID,this.notes=this.param.data.notes,localStorage.setItem("objectId",this.param.data.objectId)},t.prototype.update=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.validCheck.inputBlankCheck("update")];case 1:return e.sent()?(t=[document.getElementById("updateFirstName").value+" "+document.getElementById("updateLastName").value,document.getElementById("updateManagementNum").value,Number(document.getElementById("updateCategory").value),document.getElementById("updateBorrowedSource").value,document.getElementById("updateStartDate").value,document.getElementById("updateExpectedReturnDate").value,document.getElementById("updateReturnDate").value,Number(document.getElementById("updateStorageLocation").value),document.getElementById("updateNotes").value],[4,this.validCheck.isPhoneticCheck("update")]):[2];case 2:return e.sent()?[4,this.validCheck.executeConfirm("更新")]:[2];case 3:return e.sent()?[4,this.validCheck.isExistUserCheck(t[0])]:[2];case 4:return e.sent()?[4,this.updateService.executeUpdate(t)]:[2];case 5:return e.sent()?(console.log("更新OK"),[4,l.notification.toast({message:"更新が完了しました。",timeout:1e3})]):[3,8];case 6:return e.sent(),sessionStorage.setItem("updateFlag",this.objectId),[4,this.navigator.element.popPage()];case 7:e.sent(),e.label=8;case 8:return[2]}}))}))},t=r([s.Component({selector:"ons-page[update]",template:'\n   <ons-page id="updatePage" ng-controller="updateController">\n    <ons-toolbar>\n        <div class="center">\n            更新\n        </div>\n        <div class="left">\n          <ons-back-button>Back</ons-back-button>\n        </div>\n    </ons-toolbar>\n    <div style="text-align: center;">\n        <ons-list>\n            <ons-list-header>氏名</ons-list-header>\n            <p style="text-align: center;">\n              <ons-input id="updateFirstName" type="text" modifier="underbar" ngModel maxlength="10" placeholder="姓" name="firstName" [ngModel]="firstName" float></ons-input>\n              <ons-input id="updateLastName" type="text" modifier="underbar" ngModel maxlength="10" placeholder="名" name="lastName" [ngModel]="lastName" float></ons-input>\n            </p>\n        </ons-list>\n\n        <ons-list>\n            <ons-list-header>管理番号</ons-list-header>\n            <p style="text-align: center;">\n              <ons-input id="updateManagementNum" type="text" modifier="underbar" ngModel maxlength="30" name="managementNum" [ngModel]="managementNum" float></ons-input>\n            </p>\n        </ons-list>\n            \n        <ons-list>\n          <ons-list-header>カテゴリ</ons-list-header>\n          <p style="text-align: center;">\n            <ons-select id="updateCategory" [(ngModel)]="selectedModifier" [attr.modifier]="selectedModifier">\n              <option *ngFor="let modifier of modifiers" [value]="modifier.value">\n                {{ modifier.label }}\n               </option>\n            </ons-select>\n          </p>\n        </ons-list>    \n\n        <ons-list>\n        <ons-list-header>貸与元名称</ons-list-header>\n            <p style="text-align: center;">\n              <ons-input id="updateBorrowedSource" type="text" modifier="underbar" name="borrowedSource" [ngModel]="borrowedSource" float></ons-input>\n            </p>\n        </ons-list>\n\n        <ons-list>\n            <ons-list-header>貸与開始日</ons-list-header>\n            <p style="text-align: center;">\n                <ons-input id="updateStartDate" modifier="underbar" type="date" name="startDate" [ngModel]="startDate" float></ons-input>\n            </p>\n        </ons-list>\n        <ons-list>\n            <ons-list-header>返却予定日</ons-list-header>\n            <p style="text-align: center;">\n                <ons-input id="updateExpectedReturnDate" modifier="underbar" type="date" name="expectedReturnDate" [ngModel]="expectedReturnDate" float></ons-input>\n            </p>\n        </ons-list>\n        <ons-list>\n            <ons-list-header>返却日</ons-list-header>\n            <p style="text-align: center;">\n                <ons-input style="width: 30%;" id="updateReturnDate" modifier="underbar" type="date" name="returnDate" [ngModel]="returnDate" float></ons-input>\n            </p>\n        </ons-list>\n        <ons-list>\n            <ons-list-header>保管場所</ons-list-header>\n          <p style="text-align: center;">\n            <ons-select id="updateStorageLocation" [(ngModel)]="selectedStorageLocation" [attr.location]="selectedStorageLocation">\n              <option *ngFor="let location of StorageLocation" [value]="location.value">\n                {{ location.label }}\n               </option>\n            </ons-select>\n          </p>\n        </ons-list>\n        <ons-list>\n            <ons-list-header>備考</ons-list-header>\n            <p style="text-align: center;">\n                <textarea class="textarea textarea--transparent" id="updateNotes" rows="3" placeholder="30字以内で入力してください。" ngModel maxlength="30" name="notes" [ngModel]="notes"></textarea>\n            </p>\n        </ons-list>\n        \n        \n        \x3c!--更新ボタン--\x3e\n        <div >\n            <ons-button modifier="large" (click)="update()">更新</ons-button>\n        </div>\n        \n    </div>\n</ons-page>\n\n  '}),o("design:paramtypes",["function"==typeof(e=void 0!==c.OnsNavigator&&c.OnsNavigator)&&e||Object,"function"==typeof(n=void 0!==c.Params&&c.Params)&&n||Object,"function"==typeof(d=void 0!==u.ValidationCheckService&&u.ValidationCheckService)&&d||Object,"function"==typeof(p=void 0!==h.RegisterService&&h.RegisterService)&&p||Object,"function"==typeof(g=void 0!==f.UpdateService&&f.UpdateService)&&g||Object])],t)}();e.Update=d},163:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=163},166:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=n(10),l=function(){function t(){}return t.prototype.update=function(t,e,n){return void 0===n&&(n=3),o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,ncmb.DataStore("Object").equalTo("objectId",t).fetch().then((function(t){console.log(JSON.stringify(t));for(var n=0;n<e.length;n++)e[n].objectId===t.objectId&&(e.splice(n,1,t),console.log(JSON.stringify(e)));return!0})).catch((function(t){return t}))];case 1:return!0!==(r=i.sent())?[3,2]:[2];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(o=s.errCodeToMsg(r))?[3,3]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3}),[3,7]);case 3:return console.log("NWエラー"),n>0?(console.log("残り: "+n+"回リトライ。"),[4,this.update(t,e,--n)]):[3,5];case 4:return i.sent(),[3,7];case 5:return[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3})];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t.prototype.determine=function(t){return o(this,void 0,void 0,(function(){var e,n,r,o,a,s,c,l,u,h,f,d,p,g,v;return i(this,(function(i){switch(i.label){case 0:return e=new RegExp("(^[0-9]{2}[1-9]$ | ^[7][0]{2}$)"),n=new RegExp("(^[1-9]{2}[0]$ | ^[2-6][0]{2}$)"),r=new RegExp("^[1][0]{2}$"),o=e.test(t),a=n.test(t),s=r.test(t),[],c=[],l="900",o?[4,this.searchOneLevelHierarchy(t)]:[3,2];case 1:return[2,i.sent()];case 2:return a?[4,this.searchTwoLevelHierarchy(t)]:[3,4];case 3:return[2,i.sent()];case 4:return s?[4,this.searchThreeLevelHierarchy(t)]:[3,6];case 5:return[2,i.sent()];case 6:return t!==l?[3,13]:(h=(u=c).push,[4,this.searchThreeLevelHierarchy("100")]);case 7:h.apply(u,[i.sent()]),f=2,i.label=8;case 8:return f<7?(p=(d=c).push,[4,this.searchTwoLevelHierarchy([f]+"00")]):[3,11];case 9:p.apply(d,[i.sent()]),i.label=10;case 10:return f++,[3,8];case 11:return v=(g=c).push,[4,this.searchOneLevelHierarchy("700")];case 12:return v.apply(g,[i.sent()]),[2,c.reduce((function(t,e){return t.push.apply(t,e),t}),[])];case 13:return[2]}}))}))},t.prototype.searchOneLevelHierarchy=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,this.oneLevelHierarchy(t)];case 1:return!1===(e=n.sent())?[3,3]:[4,this.getItemList(e)];case 2:return[2,n.sent()];case 3:return[2]}}))}))},t.prototype.oneLevelHierarchy=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,o,a;return i(this,(function(i){switch(i.label){case 0:return n=!1,r=[],[4,ncmb.Role.equalTo("roleName",t).fetch().then((function(t){return console.log(JSON.stringify(t)),t.fetchUser()})).then((function(t){for(var e in t)r.push(t[e].phonetic);return n=!0,r})).catch((function(t){return t}))];case 1:return o=i.sent(),n?(console.log("OK2"),console.log(JSON.stringify(o)),[2,o]):[3,2];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(a=s.errCodeToMsg(o))?[3,3]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+a,{timeout:1e3}),[3,7]);case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.oneLevelHierarchy(t,--e)]):[3,5];case 4:return i.sent(),[3,7];case 5:return[4,c.notification.toast("通信に失敗しました。エラー："+a,{timeout:1e3})];case 6:i.sent(),i.label=7;case 7:return[2,!1]}}))}))},t.prototype.searchTwoLevelHierarchy=function(t){return o(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(o){switch(o.label){case 0:return[4,this.oneLevelHierarchy(t)];case 1:return e=o.sent(),[4,this.twoLevelHierarchy(t)];case 2:return!1===(n=o.sent())&&!1===e?[3,4]:(r=n.concat(e),console.log(r+"結合配列"),console.log(r.length+"数"),[4,this.getItemList(r)]);case 3:return[2,o.sent()];case 4:return[2]}}))}))},t.prototype.twoLevelHierarchy=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,a,l;return i(this,(function(u){switch(u.label){case 0:return n=[],r=!1,[4,ncmb.Role.equalTo("roleName",t).fetch().then((function(t){return console.log(JSON.stringify(t)),t.fetchRole()})).then((function(t){return o(this,void 0,void 0,(function(){var e,o,a;return i(this,(function(s){switch(s.label){case 0:console.log(JSON.stringify(t)),o=function(r){return i(this,(function(o){switch(o.label){case 0:return[4,ncmb.User.relatedTo(t[r],"belongUser").fetchAll().then((function(e){console.log(JSON.stringify(e));for(var o=0;o<e.length;o++)n.push(e[o].phonetic);if(r===t.length-1)return n}))];case 1:return e=o.sent(),[2]}}))},a=0,s.label=1;case 1:return a<t.length?[5,o(a)]:[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return r=!0,[2,e]}}))}))})).catch((function(t){return console.log("2階層エラーですわよ。"),t}))];case 1:return a=u.sent(),r?(console.log("OK1"),console.log(JSON.stringify(a)),[2,a]):[3,2];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(l=s.errCodeToMsg(a))?[3,3]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3}),[3,7]);case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.twoLevelHierarchy(t,--e)]):[3,5];case 4:return u.sent(),[3,7];case 5:return[4,c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3})];case 6:u.sent(),u.label=7;case 7:return[2,!1]}}))}))},t.prototype.threeLevelHierarchy=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,a,l;return i(this,(function(u){switch(u.label){case 0:return n=[],r=!1,console.log(t),[4,ncmb.Role.equalTo("roleName",t).fetch().then((function(t){return console.log(JSON.stringify(t)),t.fetchRole()})).then((function(t){return o(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(o){switch(o.label){case 0:console.log(JSON.stringify(t)+"role111111111"),n=[],r=0,o.label=1;case 1:return r<t.length?[4,ncmb.Role.equalTo("roleName",t[r].roleName).fetch().then((function(t){return console.log(JSON.stringify(t)),t.fetchRole()}))]:[3,4];case 2:e=o.sent(),n.push(e),o.label=3;case 3:return r++,[3,1];case 4:return console.log(JSON.stringify(e)),console.log(JSON.stringify(n)+"bainddddd"),[2,n.reduce((function(t,e){return t.push.apply(t,e),t}),[])]}}))}))})).then((function(t){return o(this,void 0,void 0,(function(){var e,o,a;return i(this,(function(s){switch(s.label){case 0:o=function(r){return i(this,(function(o){switch(o.label){case 0:return[4,ncmb.User.relatedTo(t[r],"belongUser").fetchAll().then((function(e){console.log(JSON.stringify(e));for(var o=0;o<e.length;o++)n.push(e[o].phonetic);if(r===t.length-1)return n}))];case 1:return e=o.sent(),[2]}}))},a=0,s.label=1;case 1:return a<t.length?[5,o(a)]:[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return r=!0,[2,e]}}))}))})).catch((function(t){return console.log("3階層エラーですわよ。"),t}))];case 1:return a=u.sent(),r?(console.log("OK1"),console.log(JSON.stringify(a)),[2,a]):[3,2];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(l=s.errCodeToMsg(a))?[3,3]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3}),[3,7]);case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.threeLevelHierarchy(t,--e)]):[3,5];case 4:return u.sent(),[3,7];case 5:return[4,c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3})];case 6:u.sent(),u.label=7;case 7:return[2,!1]}}))}))},t.prototype.searchThreeLevelHierarchy=function(t){return o(this,void 0,void 0,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,this.oneLevelHierarchy(t)];case 1:return e=i.sent(),[4,this.twoLevelHierarchy(t)];case 2:return n=i.sent(),[4,this.threeLevelHierarchy(t)];case 3:return r=i.sent(),!1===n&&!1===e&&!1===r?[3,5]:(o=e.concat(n).concat(r),console.log(o+"結合配列"),console.log(o.length+"数"),[4,this.getItemList(o)]);case 4:return[2,i.sent()];case 5:return[2]}}))}))},t.prototype.getItemList=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return n=!1,[4,ncmb.DataStore("Object").in("name",t).fetchAll().then((function(t){return console.log(JSON.stringify(t)),n=!0,t})).catch((function(t){return t}))];case 1:return r=i.sent(),n?[4,Array.from(r)]:[3,3];case 2:return[2,i.sent()];case 3:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(o=s.errCodeToMsg(r))?[3,4]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3}),[3,8]);case 4:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.getItemList(t,--e)]):[3,6];case 5:return i.sent(),[3,8];case 6:return[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3})];case 7:i.sent(),i.label=8;case 8:return[2]}}))}))},t=r([a.Injectable()],t)}();e.SearchService=l},167:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=n(10),l=function(){function t(){}return t.prototype.executeUpdate=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,o,a;return i(this,(function(i){switch(i.label){case 0:return n=ncmb.DataStore("Object"),r=new n,""===t[6]&&(t[6]=null),[4,r.set("objectId",localStorage.getItem("objectId")).set("name",t[0]).set("managementNum",t[1]).set("categoryID",t[2]).set("borrowedSource",t[3]).set("startDate",t[4]).set("expectedReturnDate",t[5]).set("returnDate",t[6]).set("storageLocationID",t[7]).set("notes",t[8]).set("userName",localStorage.getItem("userName")).update().then((function(){return localStorage.removeItem("objectId"),!0})).catch((function(t){return console.log("更新に失敗"),t}))];case 1:return!0===(o=i.sent())?[2,!0]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(a=s.errCodeToMsg(o))?[3,3]:(console.log("NWエラーではない"),[4,c.notification.alert({title:"更新失敗",message:"更新に失敗しました。エラー："+a,timeout:1e3})]);case 2:return i.sent(),[3,7];case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.executeUpdate(t,--e)]):[3,5];case 4:return i.sent(),[3,7];case 5:return[4,c.notification.alert({title:"更新失敗",message:"更新に失敗しました。エラー："+a,timeout:1e3})];case 6:i.sent(),i.label=7;case 7:return[2,!1]}}))}))},t=r([a.Injectable()],t)}();e.UpdateService=l},168:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=n(10),l=function(){function t(){}return t.prototype.createDisplayList=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,ncmb.DataStore("Object").order("expectedReturnDate").equalTo("name",JSON.parse(localStorage.getItem("kana"))).or(ncmb.DataStore("Object").exists("returnDate",!1).equalTo("returnDate",null)).fetchAll().then((function(t){return localStorage.setItem("objectInfo",JSON.stringify(t)),t})).catch((function(t){return console.log("通信に失敗"),t}))];case 1:return e=r.sent(),Array.isArray(e)?[2,e]:[3,2];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(n=s.errCodeToMsg(e))?[3,4]:(console.log("NWエラーではない"),[4,c.notification.alert({title:"通信失敗",message:"通信に失敗しました。エラー："+n,timeout:1e3})]);case 3:return r.sent(),[3,8];case 4:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.createDisplayList(--t)]):[3,6];case 5:return r.sent(),[3,8];case 6:return[4,c.notification.alert({title:"通信失敗",message:"通信に失敗しました。エラー："+n,timeout:1e3})];case 7:r.sent(),r.label=8;case 8:return[2]}}))}))},t=r([a.Injectable()],t)}();e.ViewService=l},169:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=n(10),l=function(){function t(){}return t.prototype.login=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:return e=document.getElementById("userName").value,n=document.getElementById("password").value,[4,ncmb.User.login(e,n).then((function(t){localStorage.setItem("userName",e),localStorage.setItem("password",n),sessionStorage.setItem("groupID",t.groupID);var r=t.phonetic;localStorage.setItem("kana",JSON.stringify(r));var o=r.split(" ");return console.log("名字"+o[0]),localStorage.setItem("firstName",o[0]),localStorage.setItem("lastName",o[1]),!0})).catch((function(t){return t}))];case 1:return!0!==(r=i.sent())?[3,2]:[2,!0];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===(o=s.errCodeToMsg(r))?[3,4]:(console.log("NWエラーではない"),[4,c.notification.toast("ログインに失敗しました。エラー："+o,{timeout:1e3})]);case 3:return i.sent(),[3,7];case 4:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.login(--t)]):[3,6];case 5:return i.sent(),[3,7];case 6:return[2,!1];case 7:return[2]}}))}))},t.prototype.authMailAddress=function(){return o(this,void 0,void 0,(function(){var t,e;return i(this,(function(n){switch(n.label){case 0:return[4,c.notification.confirm({message:"メールアドレスの認証を行いますか？",title:"確認",callback:function(t){return 1===t}})];case 1:return n.sent()?[4,c.notification.prompt({message:"社員番号を入力してください。",title:"入力：社員番号",callback:function(t){return t}})]:[2];case 2:return t=n.sent(),[4,c.notification.prompt({message:"パスワードを入力してください。",title:"入力：パスワード",inputType:"password",callback:function(t){return t}})];case 3:return e=n.sent(),[4,this.existAuth(t,e)];case 4:return n.sent(),[2]}}))}))},t.prototype.existAuth=function(t,e,n){return void 0===n&&(n=3),o(this,void 0,void 0,(function(){var r,o;return i(this,(function(i){switch(i.label){case 0:return[4,ncmb.User.login(t,e).then((function(t){return console.log("成功"),ncmb.User.getCurrentUser().isMailAddressConfirmed()})).catch((function(t){return console.log("catch"+JSON.stringify(t)),t}))];case 1:return"boolean"!=typeof(r=i.sent())?[3,6]:r?[4,c.notification.toast("そのメールアドレスは既に認証が完了しています。",{timeout:1e3})]:[3,3];case 2:return i.sent(),[3,5];case 3:return[4,this.authInputMailAddress(t,e)];case 4:i.sent(),i.label=5;case 5:return[3,12];case 6:return console.log(r),o=s.errCodeToMsg(r),console.log(o),"ネットワークエラーが発生しました。接続状況を確認してください。"===o?[3,8]:(console.log("NWエラーではない"),[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3})]);case 7:return i.sent(),[3,12];case 8:return console.log("NWエラー"),n>0?(console.log("残り: "+n+"回リトライ。"),[4,this.existAuth(t,e,--n)]):[3,10];case 9:return i.sent(),[3,12];case 10:return[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:1e3})];case 11:i.sent(),i.label=12;case 12:return[2]}}))}))},t.prototype.authInputMailAddress=function(t,e){return o(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:return[4,c.notification.prompt({message:"認証のためメールアドレスを入力してください。",title:"入力：メールアドレス",callback:function(t){return t}})];case 1:return n=r.sent(),[4,this.authSendMailAddress(t,e,n)];case 2:return r.sent(),[2]}}))}))},t.prototype.authSendMailAddress=function(t,e,n,r){return void 0===r&&(r=3),o(this,void 0,void 0,(function(){var o,a,l;return i(this,(function(i){switch(i.label){case 0:return[4,ncmb.User.getCurrentUser()];case 1:return o=i.sent(),console.log(n),[4,o.set("mailAddress",n).update().then((function(t){return console.log("更新しました。メール確認。"),c.notification.toast("確認用のメールを送信しました。",{timeout:2e3}),ncmb.User.logout(),!0})).catch((function(t){return console.log("エラーです。"+t),ncmb.User.logout(),t}))];case 2:return!0===(a=i.sent())?[2]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(l=s.errCodeToMsg(a))?[3,4]:(console.log("NWエラーではない"),[4,c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3})]);case 3:return i.sent(),[3,8];case 4:return console.log("NWエラー"),r>0?(console.log("残り: "+r+"回リトライ。"),[4,this.authSendMailAddress(t,e,n,--r)]):[3,6];case 5:return i.sent(),[3,8];case 6:return console.log(l),[4,c.notification.toast("通信に失敗しました。エラー："+l,{timeout:1e3})];case 7:i.sent(),i.label=8;case 8:return[2]}}))}))},t.prototype.changePassword=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,c.notification.confirm({message:"パスワードの変更を行いますか？",title:"確認",callback:function(t){return 1==t}})];case 1:return e.sent()?[4,c.notification.prompt({message:"メールアドレスを入力してください。",title:"確認",callback:function(t){return t}})]:[2];case 2:return t=e.sent(),[4,this.sendMail(t)];case 3:return e.sent(),[2]}}))}))},t.prototype.sendMail=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return(n=new ncmb.User).set("mailAddress",t),[4,n.requestPasswordReset().then((function(t){return console.log("成功"),c.notification.toast("パスワード変更用メールを送信しました。",{timeout:2e3}),!0})).catch((function(t){return console.log("失敗"),t}))];case 1:return!0===(r=i.sent())?[3,7]:(console.log(r),"ネットワークエラーが発生しました。接続状況を確認してください。"===(o=s.errCodeToMsg(r))?[3,3]:(console.log("NWエラーではない"),[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:2e3})]));case 2:return i.sent(),[3,7];case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.sendMail(t,--e)]):[3,5];case 4:return i.sent(),[3,7];case 5:return[4,c.notification.toast("通信に失敗しました。エラー："+o,{timeout:2e3})];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t=r([a.Injectable()],t)}();e.LoginService=l},170:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(59),l=n(171),u=n(10),h=n(88),f=n(169),d=function(){function t(t,e,n){this.navi=t,this.onlineCheckService=e,this.loginService=n,this.localUsername="",this.localPassword="",this.selectedFile="test"}var e,n,d;return t.prototype.onFileSelected=function(t){var e=Camera.PictureSourceType.CAMERA,n=this.setOptions(e);navigator.camera.getPicture((function(t){console.log(t)}),(function(t){console.debug("Unable to obtain picture: "+t,"app")}),n)},t.prototype.setOptions=function(t){return{quality:50,destinationType:Camera.DestinationType.FILE_URI,sourceType:t,encodingType:Camera.EncodingType.JPEG,mediaType:Camera.MediaType.PICTURE,allowEdit:!0,correctOrientation:!0}},t.prototype.displayImage=function(t){document.getElementById("imageFile").src=t},t.prototype.onUpload=function(){console.log(this.selectedFile)},t.prototype.ngOnInit=function(){this.localUsername=localStorage.getItem("userName"),this.localPassword=localStorage.getItem("password")},t.prototype.login=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return t=this,[4,this.onlineCheckService.onlineCheck()];case 1:return t.isOnline=n.sent(),this.isOnline?[4,this.loginService.login()]:[3,7];case 2:return(e=n.sent())?(u.notification.toast("ログインに成功しました。",{timeout:1e3}),[4,this.navi.element.resetToPage(l.Top,{animation:"fade"})]):[3,4];case 3:return n.sent(),[3,6];case 4:return"ネットワークエラーが発生しました。接続状況を確認してください。"!==e?[3,6]:[4,u.notification.toast("ログインに失敗しました。エラー："+e,{timeout:1e3})];case 5:n.sent(),this.navi.element.resetToPage(l.Top,{animation:"fade"}),u.notification.toast("オフライン状態です。ローカルストレージのデータを出力します。",{timeout:1e3}),n.label=6;case 6:return[3,8];case 7:this.navi.element.resetToPage(l.Top,{animation:"fade"}),u.notification.toast("オフライン状態です。ローカルストレージのデータを出力します。",{timeout:1e3}),n.label=8;case 8:return[2]}}))}))},t=r([s.Component({selector:"ons-page[login]",template:'\n    <ons-page>\n    <meta http-equiv="Content-Security-Policy" content="default-src \'self\' data: gap: ms-appdata: https://ssl.gstatic.com \'unsafe-eval\'; style-src \'self\' \'unsafe-inline\'; media-src *">\n\n    <ons-toolbar>\n      <div class="left">\n        <ons-back-button>Back</ons-back-button>\n      </div>\n      <div class="center">貸与物管理アプリ</div>\n    </ons-toolbar>\n\n\n    <div class="content">\n      <form #myForm="ngForm">\n        <div style="padding: 10px">\n          <div><ons-input placeholder="社員番号" [(value)]="localUsername"  id="userName" name="userName" required minlength="4" maxlength="6" ></ons-input></div>\n        </div>\n        <div style="padding: 10px">\n          <div><ons-input type=\'password\' placeholder="パスワード" [(value)]="localPassword"  id="password" name="password" required minlength="9" maxlength="16" ></ons-input></div>\n        </div>\n\n    </form>\n     \n\n      <p>\n        <ons-button (click)="login()">ログイン</ons-button>\n      </p>\n      \n      <p>\n        <ons-button (click)="loginService.changePassword()">パスワード変更</ons-button>\n      </p>\n\n      <p>\n        <ons-button (click)="loginService.authMailAddress()">メールアドレス認証</ons-button>\n      </p>\n\n      <p>\n          \x3c!-- カメラ機能 --\x3e\n          \x3c!-- <input type="file" capture="camera" accept="image/*" id="cameraInput" name="cameraInput" (change)="onFileSelected($event)"> --\x3e\n          <button type="button" (click)="onFileSelected($event)">写真を撮る</button>\n          <button type="button" (click)="onUpload()">Upload File</button>\n      </p>\n\n      <img id="imageFile" alt="test">\n\n    </div>\n\n\n    </ons-page>\n'}),o("design:paramtypes",["function"==typeof(e=void 0!==c.OnsNavigator&&c.OnsNavigator)&&e||Object,"function"==typeof(n=void 0!==h.OnlineCheckService&&h.OnlineCheckService)&&n||Object,"function"==typeof(d=void 0!==f.LoginService&&f.LoginService)&&d||Object])],t)}();e.Login=d},171:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(10),l=n(172),u=n(173),h=n(174),f=n(88),d=function(){function t(t){this.onlineCheckService=t,this.view=l.View,this.register=u.Register,this.search=h.Search,this.classID=!1,this.isOnline=!1,this.animation=c.platform.isAndroid()?"slide":"none",this.modifier=c.platform.isAndroid()?"material noshadow":""}var e;return t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this,[4,this.onlineCheckService.onlineCheck()];case 1:return t.isOnline=e.sent(),this.loginCheck(),[2]}}))}))},t.prototype.loginCheck=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,ncmb.User.getCurrentUser()];case 1:return"01"===(t=e.sent()).classID&&(this.classID=!0),t||(this.navi.element.resetToPage(Login,{animation:"fade"}),ncmb.sessionToken=null,c.notification.toast("セッションが無効です。ログインしてください。",{timeout:2e3})),[2]}}))}))},t=r([s.Component({selector:"ons-page[top]",template:'\n    <ons-page>\n  <div class="content">\n    <ons-tabbar [attr.animation]="animation" position="auto">\n      <div class="tabbar__content"></div>\n      <div class="tabbar">\n        <ons-tab icon="square" label="全件表示" [page]="view" active></ons-tab>\n        <ons-tab icon="square" label="登録" [page]="register" *ngIf = "isOnline"></ons-tab>\n        <ons-tab icon="square" label="検索" [page]="search" *ngIf = "classID && isOnline"></ons-tab>\n      </div>\n    </ons-tabbar>\n  </div>\n</ons-page>\n'}),o("design:paramtypes",["function"==typeof(e=void 0!==f.OnlineCheckService&&f.OnlineCheckService)&&e||Object])],t)}();e.Top=d},172:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(59),l=n(131),u=n(89),h=n(88),f=n(168),d=function(){function t(t,e,n,r){this.navi=t,this.registerService=e,this.onlineCheckService=n,this.viewService=r,this.localUsername="",this.localName="",this.begin=0,this.length=10,this.page=10,this.pagerArr=function(t){t=Math.ceil(t);for(var e=[],n=0;n<t;n++)e[n]=n;return e}}var e,n,d,p;return t.prototype.paging=function(t){this.begin=this.length*t,this.page=10*(t+1)},t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return t=this,[4,this.onlineCheckService.onlineCheck()];case 1:return t.isOnline=n.sent(),this.isOnline?(e=this,[4,this.registerService.getCategoryList()]):[3,3];case 2:return e.categoryList=n.sent(),[3,4];case 3:this.categoryList=JSON.parse(localStorage.getItem("categoryList")),n.label=4;case 4:return this.displayList(),[2]}}))}))},t.prototype.switchDialog=function(t){t?this.modal.show():this.modal.hide()},t.prototype.show=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this,[4,this.onlineCheckService.onlineCheck()];case 1:return t.isOnline=e.sent(),this.isOnline&&this.displayList(),[2]}}))}))},t.prototype.focus=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return t=this,[4,this.onlineCheckService.onlineCheck()];case 1:return t.isOnline=e.sent(),this.isOnline&&this.displayList(),[2]}}))}))},t.prototype.displayList=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.isTaskExecute?[2]:(this.isTaskExecute=!0,this.modal=document.getElementById("modal"),this.switchDialog(!0),this.isOnline?(console.log("一覧表示"),t=this,[4,this.viewService.createDisplayList()]):[3,2]);case 1:return t.results=e.sent(),this.resultCnt=this.results.length,[3,3];case 2:this.results=JSON.parse(localStorage.getItem("objectInfo")),this.resultCnt=this.results.length,e.label=3;case 3:return this.switchDialog(!1),this.isTaskExecute=!1,[2]}}))}))},t.prototype.update=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return e=this,[4,this.onlineCheckService.onlineCheck()];case 1:return e.isOnline=n.sent(),this.isOnline&&this.navi.element.pushPage(l.Update,{data:t}),[2]}}))}))},r([s.HostListener("show",["$event.target"]),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],t.prototype,"show",null),r([s.HostListener("window:focus",["$event.target"]),o("design:type",Function),o("design:paramtypes",[]),o("design:returntype",Promise)],t.prototype,"focus",null),t=r([s.Component({selector:"ons-page[view]",template:'\n    <ons-page id="registrationallPage">\n        <ons-toolbar>\n            <div class="center">\n                一覧表示\n            </div>\n        </ons-toolbar>\n        \n        <ul id="dataList" class="list list--material">\n        <a id="viewTitle"></a>\n        <div>\n            <div *ngIf = "resultCnt <= page">\n            <li class="list-header" >表示結果：{{resultCnt}}/{{resultCnt}} 件</li>\n            </div>\n            <div *ngIf = "resultCnt > page">\n            <li class="list-header" >表示結果：{{page}}/{{resultCnt}} 件</li>\n            </div>\n            <div *ngFor="let result of results | slice: begin: begin+length; index as i" (click)="update(result)">\n                <li class=\'list-item list-item--material\' style=\'text-align: left;\'>\n                <table border="1" [ngSwitch] = result?.categoryID>\n                    <tr><th rowspan="7">{{(page - 10) + i + 1}}</th></tr>\n                    <tr><td>カテゴリ</td><td >{{result?.categoryID |category:categoryList}}</td></tr>\n                    <tr><td>管理番号</td><td>{{result?.managementNum}}</td></tr>\n                    <tr><td>貸与元名称</td><td>{{result?.borrowedSource}}</td></tr>\n                    <tr><td>貸与開始日</td><td>{{result?.startDate}}</td></tr>\n                    <tr><td>返却予定日</td><td>{{result?.expectedReturnDate}}</td></tr>\n                    <tr><td>備考</td><td>{{result?.notes}}</td></tr>\n                </table>\n                </li>\n            </div>\n        </div>\n        </ul>\n\n        <div class="center">\n        <ul class = "pagination">\n            <li *ngFor="let pager of pagerArr(results?.length / length) ; let i = index">\n                <a href="#viewTitle" (click)="paging(i)">{{i + 1}}</a>\n            </li>\n        </ul>\n        </div>\n\n    </ons-page>\n\n    <ons-modal id="modal" #modal>\n        <ons-icon icon="fa-spinner" spin></ons-icon>\n        <p>読み込み中・・・</p>\n    </ons-modal>\n'}),o("design:paramtypes",["function"==typeof(e=void 0!==c.OnsNavigator&&c.OnsNavigator)&&e||Object,"function"==typeof(n=void 0!==u.RegisterService&&u.RegisterService)&&n||Object,"function"==typeof(d=void 0!==h.OnlineCheckService&&h.OnlineCheckService)&&d||Object,"function"==typeof(p=void 0!==f.ViewService&&f.ViewService)&&p||Object])],t)}();e.View=d},173:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(59),l=n(130),u=n(89),h=function(){function t(t,e,n){this.navi=t,this.validCheck=e,this.registerService=n,this.firstName="",this.lastName="",this.selectedModifier=-1,this.modifiers=[{value:-1,label:"未選択"}],this.selectedStorageLocation=-1,this.StorageLocation=[{value:-1,label:"未選択"}]}var e,n,h;return t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return this.currentDate=(new Date).toISOString().substring(0,10),[4,this.registerService.getUserInfo()];case 1:return n.sent(),t=this,[4,this.registerService.getCategoryList()];case 2:return t.modifiers=n.sent(),e=this,[4,this.registerService.getStorageLocationList()];case 3:return e.StorageLocation=n.sent(),localStorage.getItem("firstName")&&(this.firstName=localStorage.getItem("firstName")),localStorage.getItem("lastName")&&(this.lastName=localStorage.getItem("lastName")),[2]}}))}))},t.prototype.register=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return[4,this.validCheck.inputBlankCheck("register")];case 1:return n.sent()?(t=[document.getElementById("registerFirstName").value+" "+document.getElementById("registerLastName").value,document.getElementById("registerManagementNum").value,Number(document.getElementById("registerCategory").value),document.getElementById("registerBorrowedSource").value,document.getElementById("registerStartDate").value,document.getElementById("registerExpectedReturnDate").value,Number(document.getElementById("registerStorageLocation").value),document.getElementById("registerNotes").value],[4,this.validCheck.isPhoneticCheck("register")]):[2];case 2:return n.sent()?[4,this.validCheck.executeConfirm("登録")]:[2];case 3:return n.sent()?[4,this.registerService.maximumDataCheck()]:[2];case 4:return(e=n.sent())&&"string"!=typeof e?[4,this.validCheck.isExistUserCheck(t[0])]:[2];case 5:return n.sent()?[4,this.registerService.executeRegist(t)]:[2];case 6:return n.sent(),[2]}}))}))},t=r([s.Component({selector:"ons-page[register]",template:'\n    \t<ons-page id="registrationPage">\n\t\t<ons-toolbar>\n\t\t\t<div class="center">\n\t\t\t\t新規登録\n\t\t\t</div>\n\t\t</ons-toolbar>\n\n\t\t<div style="text-align: center;">\n\t\t\t<ons-list>\n\n\t\t\t\t<ons-list-header>氏名（カタカナ入力）</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-input id="registerFirstName" type="text" modifier="underbar" ngModel maxlength="10" placeholder="姓" name="firstName" [ngModel]="firstName" float></ons-input>\n\t\t\t\t\t<ons-input id="registerLastName" type="text" modifier="underbar" ngModel maxlength="10" placeholder="名" name="lastName" [ngModel]="lastName" float></ons-input>\n\t\t\t\t</p>\n\t\t\t\t<ons-lazy-repeat id="infinite-list"></ons-lazy-repeat>\n\t\t\t</ons-list>\n\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>管理番号</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-input id="registerManagementNum" type="text" modifier="underbar" ngModel maxlength="30" float></ons-input>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>カテゴリ</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-select id="registerCategory" [(ngModel)]="selectedModifier" [attr.modifier]="selectedModifier">\n\t\t\t\t\t\t<option *ngFor="let modifier of modifiers" [value]="modifier.value">\n\t\t\t\t\t\t\t{{ modifier.label }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</ons-select>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>貸与元名称</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-input id="registerBorrowedSource" type="text" modifier="underbar" float></ons-input>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>貸与開始日</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-input id="registerStartDate" modifier="underbar" type="date" name="currentDate" [ngModel]="currentDate" float></ons-input>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>返却予定日</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-input id="registerExpectedReturnDate" modifier="underbar" type="date" name="currentDate" [ngModel]="currentDate" float></ons-input>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>保管場所</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<ons-select id="registerStorageLocation" [(ngModel)]="selectedStorageLocation" [attr.modifier]="selectedStorageLocation">\n\t\t\t\t\t\t<option *ngFor="let modifier of StorageLocation" [value]="modifier.value">\n\t\t\t\t\t\t\t{{ modifier.label }}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t</ons-select>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\t\t\t<ons-list>\n\t\t\t\t<ons-list-header>備考</ons-list-header>\n\t\t\t\t<p style="text-align: center;">\n\t\t\t\t\t<textarea class="textarea textarea--transparent" id="registerNotes" rows="3" placeholder="30字以内で入力してください。" ngModel maxlength="30"></textarea>\n\t\t\t\t</p>\n\t\t\t</ons-list>\n\n\n\t\t\t\x3c!--送信ボタン--\x3e\n\t\t\t<div>\n\t\t\t\t<ons-button modifier="large" (click)="register()">登録</ons-button>\n\t\t\t</div>\n\n\t\t</div>\n\t</ons-page>'}),o("design:paramtypes",["function"==typeof(e=void 0!==c.OnsNavigator&&c.OnsNavigator)&&e||Object,"function"==typeof(n=void 0!==l.ValidationCheckService&&l.ValidationCheckService)&&n||Object,"function"==typeof(h=void 0!==u.RegisterService&&u.RegisterService)&&h||Object])],t)}();e.Register=h},174:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(10),l=n(166),u=function(){function t(t){this.searchService=t,this.NOTES="",this.MESSAGE="下へ引いて再取得します。",this.USER_ROLE="",this.SELECTED_NAME="",this.NAME_BEFORE=[],this.NAME_AFTER=[],this.SELECTED_CATEGORY="",this.CATEGORYS_BEFORE=[],this.CATEGORYS_AFTER=[],this.SELECTED_DISP="未選択",this.DISPS=[{value:"未選択",label:"-"},{value:"upper",label:"昇順"},{value:"downer",label:"降順"}],this.LENT_ARTICLES_BERORE=new Array,this.LENT_ARTICLES_AFTER=new Array,this.NAME_LIST=new Array,this.CATEGORY_LIST=new Array}var e;return t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.USER_ROLE=sessionStorage.getItem("groupID"),this.getInfo(),[2]}))}))},t.prototype.switchDialog=function(t){t?this.MODAL.show():this.MODAL.hide()},t.prototype.onAction=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){return this.getInfo(),this.NOTES="",this.SELECTED_NAME="",this.SELECTED_CATEGORY="",this.SELECTED_DISP="未選択",e=Array.from(this.DISPS),this.DISPS=Array.from(e),setTimeout((function(){t.done()}),1e3),[2]}))}))},t.prototype.onChangeState=function(t){switch(t.state){case"initial":this.MESSAGE="下へ引いて再取得します。";break;case"preaction":this.MESSAGE="離すと再取得されます。";break;case"action":this.MESSAGE="再取得中..."}},t.prototype.getInfo=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.MODAL=document.getElementById("MODAL_SEARCH"),this.switchDialog(!0),t=this,[4,this.searchService.determine(this.USER_ROLE)];case 1:return t.LENT_ARTICLES_BERORE=e.sent(),this.LENT_ARTICLES_AFTER=Array.from(this.LENT_ARTICLES_BERORE),this.sortExpectedReturnDate(this.LENT_ARTICLES_BERORE),this.createCategoryList(this.LENT_ARTICLES_AFTER),this.createNameList(this.LENT_ARTICLES_AFTER),this.switchDialog(!1),[2]}}))}))},t.prototype.onupdate=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.searchService.update(t,this.LENT_ARTICLES_AFTER)];case 1:return e.sent(),[4,this.searchService.update(t,this.LENT_ARTICLES_BERORE)];case 2:return e.sent(),this.preCreateCategoryList(this.LENT_ARTICLES_BERORE),this.preCreateNameList(this.LENT_ARTICLES_BERORE),this.processedCategoryList(this.LENT_ARTICLES_BERORE),this.processedNameList(this.LENT_ARTICLES_BERORE),sessionStorage.removeItem("updateFlag"),[2]}}))}))},t.prototype.onChangeSort=function(t){this.SELECTED_DISP=t,"upper"===t?this.LENT_ARTICLES_AFTER.sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:new Date(t.expectedReturnDate)>new Date(e.expectedReturnDate)?1:new Date(t.expectedReturnDate)<new Date(e.expectedReturnDate)?-1:0})):"downer"===t&&this.LENT_ARTICLES_AFTER.sort((function(t,e){return t.name>e.name?-1:t.name<e.name||new Date(t.expectedReturnDate)>new Date(e.expectedReturnDate)?1:new Date(t.expectedReturnDate)<new Date(e.expectedReturnDate)?-1:0}))},t.prototype.onChangeSelectCategory=function(t){this.SELECTED_CATEGORY=t;var e=this.SELECTED_DISP,n=this.SELECTED_NAME,r=this.NOTES;""===t&&""===n?(this.LENT_ARTICLES_AFTER=Array.from(this.LENT_ARTICLES_BERORE),this.onChangeSort(e),this.createNameList(this.LENT_ARTICLES_BERORE),this.createCategoryList(this.LENT_ARTICLES_BERORE)):""===t&&""!==n?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(t){return t.name==n})),this.onChangeSort(e),this.createCategoryList(this.LENT_ARTICLES_AFTER),this.processedNameList(this.LENT_ARTICLES_BERORE)):""!==t&&""===n?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(e){return e.categoryID==t.toString()})),this.onChangeSort(e),this.createNameList(this.LENT_ARTICLES_AFTER),this.processedCategoryList(this.LENT_ARTICLES_BERORE)):(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(e){return e.categoryID==t.toString()})).filter((function(t){return t.name==n})),this.CATEGORY_LIST=this.LENT_ARTICLES_BERORE.filter((function(e){return e.categoryID==t.toString()})),this.onChangeSort(e),this.processedNameList(this.CATEGORY_LIST)),this.broadMatchModifier(r)},t.prototype.onChangeSelectName=function(t){this.SELECTED_NAME=t;var e=this.SELECTED_DISP,n=this.SELECTED_CATEGORY,r=this.NOTES;""===t&&""===n?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE,this.onChangeSort(e),this.createNameList(this.LENT_ARTICLES_BERORE),this.createCategoryList(this.LENT_ARTICLES_BERORE)):""===t&&""!==n?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(t){return t.categoryID==n.toString()})),this.onChangeSort(e),this.processedCategoryList(this.LENT_ARTICLES_BERORE)):""!==t&&""===n?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(e){return e.name==t})),this.onChangeSort(e),this.createCategoryList(this.LENT_ARTICLES_AFTER)):(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(e){return e.name==t})).filter((function(t){return t.categoryID==n.toString()})),this.NAME_LIST=this.LENT_ARTICLES_BERORE.filter((function(e){return e.name==t})),this.onChangeSort(e),console.log(JSON.stringify(this.CATEGORYS_BEFORE)),console.log(JSON.stringify(this.NAME_LIST)),this.processedCategoryList(this.NAME_LIST)),this.broadMatchModifier(r)},t.prototype.add=function(t,e,n){t.some((function(t){return t.value===e}))||t.push({value:e,label:n})},t.prototype.sortValue=function(t){return t.sort((function(t,e){return t.value>e.value?1:-1})),t},t.prototype.createCategoryList=function(t){var e=[{value:"",label:"未選択"}],n=JSON.parse(localStorage.getItem("categoryList"));for(var r in t)for(var o in n)if(t[r].categoryID===n[o].value){this.add(e,t[r].categoryID,n[o].label);break}this.CATEGORYS_BEFORE=this.sortValue(e),this.CATEGORYS_AFTER=Array.from(this.CATEGORYS_BEFORE)},t.prototype.preCreateCategoryList=function(t){var e=[{value:"",label:"未選択"}],n=JSON.parse(localStorage.getItem("categoryList"));for(var r in t)for(var o in n)if(t[r].categoryID===n[o].value){this.add(e,t[r].categoryID,n[o].label);break}this.CATEGORYS_BEFORE=this.sortValue(e)},t.prototype.processedCategoryList=function(t){var e=this.SELECTED_CATEGORY,n=[{value:"",label:"未選択"}];for(var r in t)for(var o in this.CATEGORYS_BEFORE)if(t[r].categoryID===this.CATEGORYS_BEFORE[o].value){this.add(n,t[r].categoryID,this.CATEGORYS_BEFORE[o].label);break}var i=this.sortValue(n);if(-1!==JSON.stringify(i).indexOf(e)){var a=this.CATEGORYS_AFTER.findIndex((function(t){return t.value===Number(e)}));for(var r in this.CATEGORYS_AFTER.splice(0,a),this.CATEGORYS_AFTER.splice(1,this.CATEGORYS_AFTER.length-1),this.CATEGORYS_BEFORE)for(var o in i)if(this.CATEGORYS_BEFORE[r].value===i[o].value){this.add(this.CATEGORYS_AFTER,i[o].value,this.CATEGORYS_BEFORE[r].label);break}this.sortValue(this.CATEGORYS_AFTER)}else this.CATEGORYS_AFTER=Array.from(i)},t.prototype.createNameList=function(t){var e=[{value:"",label:"未選択"}];for(var n in t)this.add(e,t[n].name,t[n].name);this.NAME_BEFORE=this.sortValue(e),this.NAME_AFTER=Array.from(this.NAME_BEFORE)},t.prototype.preCreateNameList=function(t){var e=[{value:"",label:"未選択"}];for(var n in t)this.add(e,t[n].name,t[n].name);this.NAME_BEFORE=this.sortValue(e)},t.prototype.processedNameList=function(t){var e=this.SELECTED_NAME,n=[{value:"",label:"未選択"}];for(var r in t)this.add(n,t[r].name,t[r].name);var o=this.sortValue(n);if(-1!==JSON.stringify(o).indexOf(e)){var i=this.NAME_AFTER.findIndex((function(t){return t.value===e}));for(var a in this.NAME_AFTER.splice(0,i),this.NAME_AFTER.splice(1,this.NAME_AFTER.length-1),o)this.add(this.NAME_AFTER,o[a].value,o[a].label);this.sortValue(this.NAME_AFTER)}else this.NAME_AFTER=Array.from(o)},t.prototype.sortExpectedReturnDate=function(t){this.LENT_ARTICLES_AFTER=Array.from(this.LENT_ARTICLES_BERORE).sort((function(t,e){return new Date(t.expectedReturnDate)>new Date(e.expectedReturnDate)?1:new Date(t.expectedReturnDate)<new Date(e.expectedReturnDate)?-1:t.name>e.name?1:t.name<e.name?-1:0}))},t.prototype.broadMatchModifier=function(t){var e=this.SELECTED_NAME,n=this.SELECTED_CATEGORY,r=t.value;void 0===t.value&&(r=t),""!=r?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_AFTER.filter((function(t){return t.notes.indexOf(r)>-1})),0===this.LENT_ARTICLES_AFTER.length?(this.emptyProcess(),c.notification.toast("検索結果が存在しませんでした。",{timeout:1e3})):""===n&&""===e?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(t){return t.notes.indexOf(r)>-1})),this.createNameList(this.LENT_ARTICLES_AFTER),this.createCategoryList(this.LENT_ARTICLES_AFTER)):""===n&&""!==e?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_AFTER.filter((function(t){return t.name==e})),this.createCategoryList(this.LENT_ARTICLES_AFTER),this.processedNameList(this.LENT_ARTICLES_AFTER)):""!==n&&""===e?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_AFTER.filter((function(t){return t.categoryID==n.toString()})),this.processedNameList(this.LENT_ARTICLES_AFTER),this.processedCategoryList(this.LENT_ARTICLES_AFTER)):(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_AFTER.filter((function(t){return t.categoryID==n.toString()})).filter((function(t){return t.name==e})),this.processedNameList(this.LENT_ARTICLES_AFTER),this.processedCategoryList(this.LENT_ARTICLES_AFTER))):this.emptyProcess()},t.prototype.emptyProcess=function(){var t=this.SELECTED_NAME,e=this.SELECTED_CATEGORY;""===e&&""===t?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE,this.createNameList(this.LENT_ARTICLES_BERORE),this.createCategoryList(this.LENT_ARTICLES_BERORE)):""===e&&""!==t?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(e){return e.name==t})),this.createCategoryList(this.LENT_ARTICLES_AFTER),this.processedNameList(this.LENT_ARTICLES_BERORE)):""!==e&&""===t?(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(t){return t.categoryID==e.toString()})),this.createNameList(this.LENT_ARTICLES_AFTER),this.processedCategoryList(this.LENT_ARTICLES_BERORE)):(this.LENT_ARTICLES_AFTER=this.LENT_ARTICLES_BERORE.filter((function(t){return t.categoryID==e.toString()})).filter((function(e){return e.name==t})),this.processedNameList(this.LENT_ARTICLES_AFTER),this.processedCategoryList(this.LENT_ARTICLES_AFTER))},t=r([s.Component({selector:"ons-page[search]",template:'\n   <ons-page id="registrationallPage">\n    <ons-toolbar>\n        <div class="center">\n            検索\n        </div>\n    </ons-toolbar>\n    <div class="content">\n      <ons-pull-hook height="64px" threshold-height="256px" (changestate)="onChangeState($event)" (action)="onAction($event)">\n        {{MESSAGE}}\n      </ons-pull-hook>\n    <ul id="dataList" class="list list--material">\n    <div>\n    <li class="list-header">検索条件</li>\n    <div class = "search">\n    <table class="searchList" border="1">\n          <tr><td>氏名</td><td>\n            <li class = "search_1">\n              <ons-select [(ngModel)]="SELECTED_NAME" [attr.modifier]="SELECTED_NAME" \n              (change)="onChangeSelectName($event?.target?.value)" id = "selectName">\n              \n                <option *ngFor="let name of NAME_AFTER" [value]="name?.value" >\n                  {{ name?.label }}\n                </option>\n              </ons-select>\n            </li>\n          </td></tr>\n          <tr><td>カテゴリ</td><td>\n            <li class = "search_1" >\n              <ons-select name="category" [(ngModel)]="SELECTED_CATEGORY" [attr.modifier]="SELECTED_CATEGORY"\n              (change)=onChangeSelectCategory($event?.target?.value)>\n              \n                <option *ngFor="let category of CATEGORYS_AFTER" [value]="category?.value" >\n                  {{ category?.label }}\n                </option>\n              </ons-select>\n            </li>\n          </td></tr>\n          <tr><td>備考</td><td>\n            <li class = "search_2" >\n            <p style="text-align: center;">\n              <ons-input id="searchRemarks" type="text" modifier="underbar" ngModel maxlength="30" placeholder="検索文字" name="NOTES" [(ngModel)]="NOTES" #input (keyup.enter)="broadMatchModifier(input)" float></ons-input>\n            </p>\n            </li>\n          </td></tr>\n        </table>\n     \n    </div>\n    </div>\n    </ul>\n    <ul id="dataList" class="list list--material">\n    <div>\n    <li class="list-header">表示方法</li>\n    <div class = "search">\n    <table class="searchList" border="1">\n          <tr><td>氏名</td><td>\n            <li class = "search_1">\n              <ons-select [(ngModel)]="SELECTED_DISP" [attr.modifier]="SELECTED_DISP" \n              (change)=onChangeSort($event?.target?.value)>\n                <option *ngFor="let disp of DISPS" [value]="disp?.value">\n                  {{ disp?.label }}\n                </option>\n              </ons-select>\n            </li>\n        </table>\n    </div>\n    </div>\n    </ul>\n   <searchView [item]="LENT_ARTICLES_AFTER"  (updated)="onupdate($event)"></searchView>\n   </div>\n</ons-page>\n\n    <ons-modal id="MODAL_SEARCH" #MODAL_SEARCH>\n        <ons-icon icon="fa-spinner" spin></ons-icon>\n        <p>読み込み中・・・</p>\n    </ons-modal>\n\n  '}),o("design:paramtypes",["function"==typeof(e=void 0!==l.SearchService&&l.SearchService)&&e||Object])],t)}();e.Search=u},177:function(t,e,n){n(178),n(368),t.exports=n(379)},178:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(179),n(367)},368:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),n(369),n(371);var o=n(10),i=n(1),a=n(164),s=n(165),c=n(59),l=n(20),u=n(374),h=n(88),f=n(130),d=n(166),p=n(89),g=n(167),v=n(168),y=n(169),m=n(375),E=n(172),b=n(173),S=n(174),R=n(170),_=n(131),T=n(171),L=n(378);i.enableProdMode(),o.platform.isIPhoneX()&&(document.documentElement.setAttribute("onsflag-iphonex-portrait",""),document.documentElement.setAttribute("onsflag-iphonex-landscape",""));var w=function(){function t(){}return t=r([i.NgModule({imports:[c.OnsenModule,s.HttpModule,l.FormsModule],declarations:[m.MyApp,E.View,b.Register,S.Search,R.Login,T.Top,_.Update,L.SearchView,u.CategoryPipe],entryComponents:[E.View,b.Register,S.Search,R.Login,T.Top,_.Update,L.SearchView],bootstrap:[m.MyApp],schemas:[i.CUSTOM_ELEMENTS_SCHEMA],providers:[h.OnlineCheckService,f.ValidationCheckService,d.SearchService,p.RegisterService,g.UpdateService,v.ViewService,y.LoginService]})],t)}();a.platformBrowserDynamic().bootstrapModule(w).catch((function(t){return console.error(t)}))},374:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),i=function(){function t(){}return t.prototype.transform=function(t,e){for(var n=0;n<e.length;n++)if(e[n].value==t)return e[n].label},t=r([o.Pipe({name:"category"})],t)}();e.CategoryPipe=i},375:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),a=n(170),s=n(376),c=function(){function t(){this.login=a.Login}return t=r([i.Component({selector:"app",template:'<ons-navigator [page]="login" id="nav" var="myNavigator"></ons-navigator>',style:[s.default]}),o("design:paramtypes",[])],t)}();e.MyApp=c},376:function(t,e,n){var r=n(377);t.exports="string"==typeof r?r:r.toString()},377:function(t,e,n){},378:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),c=n(59),l=n(131),u=function(){function t(t){this.navi=t,this.updated=new s.EventEmitter,this.start=0,this.len=10,this.page=10,this.pagerArr=function(t){t=Math.ceil(t);for(var e=[],n=0;n<t;n++)e[n]=n;return e}}var e;return t.prototype.ngOnInit=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.categoryList=JSON.parse(localStorage.getItem("categoryList")),[2]}))}))},t.prototype.paging=function(t){this.start=this.len*t,this.page=10*(t+1)},t.prototype.update=function(t){var e=this.updated;this.navi.element.pushPage(l.Update,{data:t}),document.addEventListener("postpop",(function(t){var n=sessionStorage.getItem("updateFlag");n&&e.emit(n)}))},r([s.Input(),o("design:type",Array)],t.prototype,"item",void 0),r([s.Output(),o("design:type",Object)],t.prototype,"updated",void 0),t=r([s.Component({selector:"searchView",template:'\n   \n    <ul id="dataList" class="list list--material">\n        <a id="searchTitle"></a>\n        <div>\n            <div *ngIf = "item?.length <= page">\n                <li class="list-header" >表示結果：{{item?.length}}/{{item?.length}} 件</li>\n            </div>\n            <div *ngIf = "item?.length > page">\n                <li class="list-header" >表示結果：{{page}}/{{item?.length}} 件</li>\n            </div>\n        </div>\n        \n        <div *ngFor = "let r of item | slice: start: start+len ; index as i" (click)="update(r)">\n            <li class=\'list-item list-item--material\' style=\'text-align: left;\'>\n                <table border="1" >\n                    <tr><th rowspan="9">{{i+1}}</th></tr>\n                    <tr><td>氏名</td><td>{{r?.name}}</td></tr>\n                    <tr><td>カテゴリ</td><td >{{r?.categoryID | category:categoryList}}</td></tr>\n                    <tr><td>管理番号</td><td>{{r?.managementNum}}</td></tr>\n                    <tr><td>貸与元名称</td><td>{{r?.borrowedSource}}</td></tr>\n                    <tr><td>貸与開始日</td><td>{{r?.startDate}}</td></tr>\n                    <tr><td>返却予定日</td><td>{{r?.expectedReturnDate}}</td></tr>\n                    <tr><td>返却日</td><td>{{r?.returnDate }}</td></tr>\n                    <tr><td>備考</td><td>{{r?.notes}}</td></tr>\n                </table>\n            </li>\n        </div>\n    </ul>\n\n    <div class="center">\n      <ul class = "pagination">\n          <li *ngFor="let pager of pagerArr(item.length / len) ; let i = index" >\n            <a href="#searchTitle" (click)="paging(i)">{{i + 1}}</a>\n          </li>\n      </ul>\n    </div>\n\n  '}),o("design:paramtypes",["function"==typeof(e=void 0!==c.OnsNavigator&&c.OnsNavigator)&&e||Object])],t)}();e.SearchView=u},379:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(33),n(164),n(1),n(165),n(59)},65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={E400000:"不正なリクエストです。",E400001:"JSONの形式が不正です。",E400002:"型が不正です。",E400003:"必須項目で未入力の値が存在します。",E400004:"フォーマットが不正です。",E400005:"無効な値です。",E400006:"存在しない値です。",E400007:"インポートエラーが発生しました。",E400008:"相関関係でエラーが発生しました。",E400009:"指定桁数を超えています。",E401000:"認証エラーです。",E401001:"Header不正による認証エラーです。",E401002:"ID又はパスワードが誤っております。ご確認ください。",E401003:"OAuth認証エラーです。",E401004:"決済情報なしでの有料プラン申込みによるエラーです。",E403000:"アクセス権がありません。",E403001:"フォルダ制御によるアクセス権がありません。",E403002:"コラボレータ/管理者権限がありません。又は、シグネチャなどの不正な操作によるエラーです。",E403003:"禁止されているオペレーションを実行しました。",E403004:"ワンタイムキーの有効期限が切れています。",E403005:"設定不可の項目です。",E403006:"GeoPoint型フィールドに対してGeoPoint型以外の値を登録／更新しようとしました。GeoPoint型以外のフィールドに対してGeoPoint型の値を登録／更新しようとしました。不正な位置検索の実施が検知されました。",E404001:"該当データがありません。",E404002:"該当サービスがありません。",E404003:"該当フィールドがありません。",E404004:"該当デバイストークンがありません。",E404005:"該当アプリケーションがありません。",E404006:"該当ユーザが存在しません。",E405001:"リクエストURI/メソッドが不許可となっています。",E409001:"重複したデータが存在しています。",E413001:"1ファイルあたりのサイズ上限エラーです。",E413002:"1ドキュメントあたりのサイズ上限エラーです。（16MB）",E413003:"複数オブジェクト一括操作の上限エラーです。",E414000:"リクエストURI長の上限エラーです。",E415001:"サポート対象外のContent-Typeを指定しました。",E429001:"使用制限（APIコール数/PUSH通知数/ストレージ容量）を超過しています。",E429002:"過度な同時接続が行われました。",E500001:"システムエラー ・DBエラーが発生しました。",E502001:"ストレージでエラーが発生しました。",E502002:"メール送信エラーです。",E503001:"サービス利用不可となっております。"};e.errCodeToMsg=function(t){var e="エラーが発生しました。";return t.code?e=r[t.code]:!0===t.crossDomain?e="ネットワークエラーが発生しました。接続状況を確認してください。":"Save the object before updating"===t.message?e="データが存在しません。":"To login by account, userName and password are necessary."===t.message?e="社員番号、またはパスワードが違います。":"MailAddress must be set."===t.message?e="メールアドレスを入力してください。":"ERROR: Request has been terminated Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc."===t&&(e="ネットワークエラーが発生しました。接続状況を確認してください。"),console.log("common:"+JSON.stringify(t.message)),console.log("common:"+e),e}},88:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=function(){function t(){}return t.prototype.onlineCheck=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return console.log("ネットワーク状態を確認します。"),e=ncmb.DataStore("Object"),new e,[4,e.count().fetch().then((function(t){return console.log("チェックOK"),!0})).catch((function(t){return console.log("チェック失敗"),t}))];case 1:return!0!==(n=r.sent())?[3,2]:[2,!0];case 2:return"ネットワークエラーが発生しました。接続状況を確認してください。"===s.errCodeToMsg(n)?[3,3]:(console.log("NWエラーではない"),[2,!1]);case 3:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.onlineCheck(--t)]):[3,5];case 4:return r.sent(),[3,6];case 5:return console.log("アラート表示"),[2,!1];case 6:return[2]}}))}))},t=r([a.Injectable()],t)}();e.OnlineCheckService=c},89:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),s=n(65),c=n(10),l=function(){function t(){}return t.prototype.getUserInfo=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,ncmb.User.exists("userName").fetchAll().then((function(t){for(var e=[],n=0;n<t.length;n++)e.push([t[n].name,t[n].phonetic,t[n].userName]);return sessionStorage.setItem("kanaArray",JSON.stringify(e)),console.log("カナ配列追加:"+JSON.stringify(e)),!0})).catch((function(t){return t}))];case 1:return!0===(e=r.sent())?[2]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(n=s.errCodeToMsg(e))?[3,2]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+n,{timeout:1e3}),[3,5]);case 2:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.getUserInfo(--t)]):[3,4];case 3:return r.sent(),[3,5];case 4:c.notification.toast("通信に失敗しました。エラー："+n,{timeout:1e3}),r.label=5;case 5:return[2]}}))}))},t.prototype.getCategoryList=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(o){switch(o.label){case 0:return e=!1,[4,ncmb.DataStore("Category").fetchAll().then((function(t){return e=!0,console.log("カテゴリー取得"),console.log(JSON.stringify(t)),t})).catch((function(t){return t}))];case 1:return n=o.sent(),e?[2,this.setCategoryList(n)]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(r=s.errCodeToMsg(n))?[3,2]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+r,{timeout:1e3}),[3,5]);case 2:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.getCategoryList(--t)]):[3,4];case 3:return o.sent(),[3,5];case 4:c.notification.toast("通信に失敗しました。エラー："+r,{timeout:1e3}),o.label=5;case 5:return[2]}}))}))},t.prototype.setCategoryList=function(t){var e=[{value:-1,label:"未選択"}];try{var n=t;console.log(JSON.stringify(n));for(var r=0;r<n.length;r++){var o={value:n[r].categoryID,label:n[r].category};e.push(o)}}catch(t){console.log("カテゴリーリストの作成に失敗しました。")}return e.sort((function(t,e){return t.value>e.value?1:-1})),localStorage.setItem("categoryList",JSON.stringify(e)),e},t.prototype.getStorageLocationList=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n;return i(this,(function(r){switch(r.label){case 0:return[4,ncmb.DataStore("StorageLocation").fetchAll().then((function(t){return sessionStorage.setItem("storageLocation",JSON.stringify(t)),!0})).catch((function(t){return t}))];case 1:return!0===(e=r.sent())?[2,this.setStorageLocationList()]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(n=s.errCodeToMsg(e))?[3,2]:(console.log("NWエラーではない"),c.notification.toast("通信に失敗しました。エラー："+n,{timeout:1e3}),[3,5]);case 2:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.getStorageLocationList(--t)]):[3,4];case 3:return r.sent(),[3,5];case 4:c.notification.toast("通信に失敗しました。エラー："+n,{timeout:1e3}),r.label=5;case 5:return[2]}}))}))},t.prototype.setStorageLocationList=function(){var t=[{value:-1,label:"未選択"}];try{var e=JSON.parse(sessionStorage.getItem("storageLocation"));console.log(JSON.stringify(e));for(var n=0;n<e.length;n++){var r={value:e[n].storageLocationID,label:e[n].storageLocation};t.push(r)}}catch(t){console.log("保管場所リストの作成に失敗しました。")}return t.sort((function(t,e){return t.value>e.value?1:-1})),t},t.prototype.maximumDataCheck=function(t){return void 0===t&&(t=3),o(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(o){switch(o.label){case 0:return console.log("上限を確認します。"),e=ncmb.DataStore("Object"),new e,[4,e.count().fetchAll().then((function(t){console.log("条件検索成功"+JSON.stringify(t)),console.log(t.count);return t.count>=1e7&&c.notification.alert({title:"登録エラー",message:"本アプリの登録可能上限数（1千万件）を超過しています。"}),t.count<1e7})).catch((function(t){return console.log("上限NG:"+t),t}))];case 1:return"boolean"==typeof(n=o.sent())?[2,n]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(r=s.errCodeToMsg(n))?[3,3]:(console.log("NWエラーではない"),[4,c.notification.alert({title:"登録失敗",message:"登録に失敗しました。エラー："+r,timeout:1e3})]);case 2:return o.sent(),[3,7];case 3:return console.log("NWエラー"),t>0?(console.log("残り: "+t+"回リトライ。"),[4,this.executeRegist(--t)]):[3,5];case 4:return o.sent(),[3,7];case 5:return console.log("アラート表示"),[4,c.notification.alert({title:"登録失敗",message:"登録に失敗しました。エラー："+r,timeout:1e3})];case 6:o.sent(),o.label=7;case 7:return[2,!1]}}))}))},t.prototype.executeRegist=function(t,e){return void 0===e&&(e=3),o(this,void 0,void 0,(function(){var n,r,o;return i(this,(function(i){switch(i.label){case 0:return n=ncmb.DataStore("Object"),[4,(new n).set("name",t[0]).set("managementNum",t[1]).set("categoryID",t[2]).set("borrowedSource",t[3]).set("startDate",t[4]).set("expectedReturnDate",t[5]).set("storageLocationID",t[6]).set("notes",t[7]).set("userName",localStorage.getItem("userName")).save().then((function(t){return c.notification.toast({message:"登録が完了しました。",timeout:1e3}),!0})).catch((function(t){return console.log("登録に失敗"),t}))];case 1:return!0===(r=i.sent())?[2]:"ネットワークエラーが発生しました。接続状況を確認してください。"===(o=s.errCodeToMsg(r))?[3,3]:(console.log("NWエラーではない"),[4,c.notification.alert({title:"登録失敗",message:"登録に失敗しました。エラー："+o,timeout:1e3})]);case 2:return i.sent(),[3,7];case 3:return console.log("NWエラー"),e>0?(console.log("残り: "+e+"回リトライ。"),[4,this.executeRegist(t,--e)]):[3,5];case 4:return i.sent(),[3,7];case 5:return[4,c.notification.alert({title:"登録失敗",message:"登録に失敗しました。エラー："+o,timeout:1e3})];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))},t=r([a.Injectable()],t)}();e.RegisterService=l}},[[177,1,2]]]);